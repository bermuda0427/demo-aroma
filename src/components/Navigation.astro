---
/**
 * Navigation Component
 * 導覽列 - 玻璃光影效果
 */
---

<nav id="main-nav" class="fixed top-0 left-0 right-0 z-50 transition-all duration-500">
  <div class="container-site py-6">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="logo text-2xl font-light tracking-widest">
        <span class="text-display">AROMA</span>
      </a>
      
      <!-- Desktop Menu -->
      <ul class="hidden md:flex items-center gap-12">
        <li><a href="#about" class="nav-link text-accent">關於</a></li>
        <li><a href="#products" class="nav-link text-accent">產品</a></li>
        <li><a href="#services" class="nav-link text-accent">服務</a></li>
        <li><a href="#contact" class="nav-link text-accent">聯絡</a></li>
      </ul>
      
      <!-- Mobile Menu Button -->
      <button 
        id="mobile-menu-btn" 
        class="md:hidden flex flex-col gap-1.5 w-8 h-8 justify-center items-center"
        aria-label="Toggle menu"
      >
        <span class="menu-line w-full h-0.5 bg-current transition-all duration-300"></span>
        <span class="menu-line w-full h-0.5 bg-current transition-all duration-300"></span>
        <span class="menu-line w-full h-0.5 bg-current transition-all duration-300"></span>
      </button>
    </div>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div 
  id="mobile-menu" 
  class="fixed inset-0 z-40 opacity-0 pointer-events-none transition-opacity duration-500"
>
  <div class="glass-dark w-full h-full flex items-center justify-center">
    <ul class="flex flex-col items-center gap-8 text-white">
      <li><a href="#about" class="mobile-nav-link text-3xl text-accent">關於</a></li>
      <li><a href="#products" class="mobile-nav-link text-3xl text-accent">產品</a></li>
      <li><a href="#services" class="mobile-nav-link text-3xl text-accent">服務</a></li>
      <li><a href="#contact" class="mobile-nav-link text-3xl text-accent">聯絡</a></li>
    </ul>
  </div>
</div>

<style>
  /* 導覽列滾動效果 */
  #main-nav {
    backdrop-filter: blur(0px);
    -webkit-backdrop-filter: blur(0px);
  }
  
  #main-nav.scrolled {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.8);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
  }
  
  /* 導覽連結 */
  .nav-link {
    position: relative;
    padding-bottom: 4px;
  }
  
  .nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 1px;
    background: currentColor;
    transition: width 0.3s ease;
  }
  
  .nav-link:hover::after {
    width: 100%;
  }
  
  /* Logo 動畫 */
  .logo {
    transition: transform 0.3s ease;
  }
  
  .logo:hover {
    transform: scale(1.05);
  }
  
  /* 手機選單按鈕動畫 */
  #mobile-menu-btn.active .menu-line:nth-child(1) {
    transform: translateY(6px) rotate(45deg);
  }
  
  #mobile-menu-btn.active .menu-line:nth-child(2) {
    opacity: 0;
  }
  
  #mobile-menu-btn.active .menu-line:nth-child(3) {
    transform: translateY(-6px) rotate(-45deg);
  }
  
  /* 手機選單 */
  #mobile-menu.active {
    opacity: 1;
    pointer-events: auto;
  }
  
  .mobile-nav-link {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.5s ease;
  }
  
  #mobile-menu.active .mobile-nav-link {
    opacity: 1;
    transform: translateY(0);
  }
  
  #mobile-menu.active .mobile-nav-link:nth-child(1) {
    transition-delay: 0.1s;
  }
  
  #mobile-menu.active .mobile-nav-link:nth-child(2) {
    transition-delay: 0.2s;
  }
  
  #mobile-menu.active .mobile-nav-link:nth-child(3) {
    transition-delay: 0.3s;
  }
  
  #mobile-menu.active .mobile-nav-link:nth-child(4) {
    transition-delay: 0.4s;
  }
</style>

<script>
  // 導覽列滾動效果
  const nav = document.getElementById('main-nav');
  let lastScroll = 0;
  
  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    
    if (currentScroll > 100) {
      nav?.classList.add('scrolled');
    } else {
      nav?.classList.remove('scrolled');
    }
    
    lastScroll = currentScroll;
  });
  
  // 手機選單切換
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
  
  mobileMenuBtn?.addEventListener('click', () => {
    mobileMenuBtn.classList.toggle('active');
    mobileMenu?.classList.toggle('active');
    document.body.style.overflow = mobileMenu?.classList.contains('active') ? 'hidden' : '';
  });
  
  // 點擊連結關閉選單
  mobileNavLinks.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenuBtn?.classList.remove('active');
      mobileMenu?.classList.remove('active');
      document.body.style.overflow = '';
    });
  });
  
  // 平滑滾動
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href') || '');
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
</script>
